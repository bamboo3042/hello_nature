<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전체 상품 관리 | 상품 관리</title>
    <link rel="stylesheet" href="/admin/css/style2.css">
    <script src="/admin/js/checkbox.js"></script>
    <script
            src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossOrigin="anonymous">
    </script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<script>

    $(function(){

        let page = $('.page').val();

        axios.get('/api/product/list?page=' + page, {

        }).then(function(response){
            let tb = $('<tbody>');
            for(let i in response.data.data){
                let $cate = response.data.data[i].cateIdx;
                let $name = response.data.date[i].name;
                let $state = response.data.data[i].state;
                let $price = response.data.data[i].price;
                let $count = response.data.data[i].count;

                let row = $('<tr>').append(
                    '<td><input type="checkbox" value="prod_list" id="PL_check_'+ i +'" name="product"' +
                    'onclick="PL_checkSelectAll()"><label for="PL_check_'+ i +'"></label></td>' +
                    '<td>'+ $cate +'</td>' +
                    '<td>'+ $name +'</td>' +
                    '<td>'+ $state +'</td>' +
                    '<td>'+ $price +'</td>' +
                    '<td>'+ $count +'</td></tr>'
                )
                tb.append(row);
            }
            $('.thead').after(tb);
            for(let i = response.data.pagination.totalPages; i > 0; i--){
                let pages = $('<li class="page_num" style="cursor: pointer" value="'+ (i - 1) +' ">').append(
                    i + '</li>'
                )
                $('#prev').after(pages);
            }

            $('.page_num').click(function(e){
                $('tbody').empty();

                $('.page').val($(this).val());
                let page = $('.page').val()

                axios.get('/api/product/list?page=' + page, {

                }).then(function(response) {
                    let tb = $('<tbody>');
                    for (let i in response.data.data) {
                        let $cate = response.data.data[i].cateIdx;
                        let $name = response.data.date[i].name;
                        let $state = response.data.data[i].state;
                        let $price = response.data.data[i].price;
                        let $count = response.data.data[i].count;

                        let row = $('<tr>').append(
                            '<td><input type="checkbox" value="prod_list" id="PL_check_' + i + '" name="product"' +
                            'onclick="PL_checkSelectAll()"><label for="PL_check_' + i + '"></label></td>' +
                            '<td>' + $cate + '</td>' +
                            '<td>' + $name + '</td>' +
                            '<td>' + $state + '</td>' +
                            '<td>' + $price + '</td>' +
                            '<td>' + $count + '</td></tr>'
                        )
                        tb.append(row);
                    }
                    $('.thead').after(tb);
                })
            })
        }).catch(function(err){
            console.log(err)
        })
    })
</script>
<body>
<!--content_title 시작-->
<div class="content_title">
    <p>전체 상품 관리<span>상품 관리</span></p>
</div>
<!--content_title 끝-->
<div class="content_title_click">
    <a onclick="PL_location()">상품 등록</a>
    <a onclick="PL_location_1()" id="product_click_2">상품 목록</a>
    <a onclick="PL_location_2()">공통문구 </a>
</div>
<!--Prod_list 시작-->
<div class="Prod_list">
    <!--PL_c1 시작-->
    <div class="PL_c1">
        <!--form 시작-->
        <form name="prod_search" onsubmit="return sendit()">
            <p id="PL_c1_title" class="product_title"><label>상품 조회</label></p>
            <!--table 시작-->
            <table>
                <tr>
                    <th width="120">판매상태</th>
                    <td>
                        <span><input type="checkbox" name="d_status" value="전체" checked id="PL_check_1"><label
                                for="PL_check_1">전체</label></span>
                        <span><input type="checkbox" name="d_status" value="판매대기" id="PL_check_2"><label
                                for="PL_check_2">판매대기</label></span>
                        <span><input type="checkbox" name="d_status" value="판매중" id="PL_check_3"><label
                                for="PL_check_3">판매중</label></span>
                        <span><input type="checkbox" name="d_status" value="판매중지" id="PL_check_4"><label
                                for="PL_check_4">판매중지</label></span>
                        <span><input type="checkbox" name="d_status" value="판매종료" id="PL_check_5"><label
                                for="PL_check_5">판매종료</label></span>
                        <span><input type="checkbox" name="d_status" value="품절" id="PL_check_6"><label for="PL_check_6">품절</label></span>
                    </td>
                </tr>
                <tr>
                    <th>카테고리</th>
                    <td>
                        <select onchange="categoryChange(this)">
                            <option value="대분류">대분류</option>
                            <option value="과일">과일</option>
                            <option value="채소">채소</option>
                            <option value="쌀·잡곡·견과">쌀·잡곡·견과</option>
                            <option value="정육·계란">정육·계란</option>
                            <option value="수산·건어물">수산·건어물</option>
                            <option value="국·반찬·요리">국·반찬·요리</option>
                            <option value="간편식·샐러드">간편식·샐러드</option>
                            <option value="양념·오일·면">양념·오일·면</option>
                            <option value="베이커리·유제품">베이커리·유제품</option>
                            <option value="커피·음료·간식">커피·음료·간식</option>
                            <option value="생활·선물세트">생활·선물세트</option>
                        </select>
                        <select id="PL_sel">
                            <option value="중분류">중분류</option>
                        </select>
                        <script>
                            function categoryChange(e) {
                                var PL_sel_1 = ["시즌한정과일", "국산과일", "수입과일", "간편과일", "냉동·건과일"];
                                var PL_sel_2 = ["필수채소", "반찬채소", "뿌리채소", "쌈·샐러드", "간편채소", "버섯류"];
                                var PL_sel_3 = ["쌀", "잡곡", "견과"];
                                var PL_sel_4 = ["소고기", "돼지고기", "닭·오리고기", "양고기", "계란류", "양념육·가공육", "햄·소시지·베이컨", "본앤브래드"];
                                var PL_sel_5 = ["시즌한정수산·회", "생선류", "오징어·낙지·문어", "새우·게·랍스터", "전복·조개류", "김·미역·해조류", "멸치·건어물", "간편수산물"];
                                var PL_sel_6 = ["반찬", "국·찌개·탕", "김치·장아찌·젓갈", "두부·어묵·냉장식품", "만두·튀김·냉동식품"];
                                var PL_sel_7 = ["밀키트", "샐러드·도시락", "밥·면·즉석식품", "떡볶이·핫도그·냉동간식", "떡", "시리얼·바·선식", "죽·수프·퓨레"];
                                var PL_sel_8 = ["소스·드레싱·육수", "장·식초·액젓", "소금·향신료·설탕·꿀", "오잉·참기름·식용유", "파스타·면", "밀가루·가루·믹스", "통조림·병조림"];
                                var PL_sel_9 = ["식빵·빵류", "케이크·파이·디저트류", "치즈·버터·잼", "우유·두유·요거트"];
                                var PL_sel_10 = ["커피", "차", "주스", "음료·즙", "생수·탄산수", "아이스크림", "과자류", "캔디·젤리·초콜릿"];
                                var PL_sel_11 = ["주방용품", "생활·위생용품", "가전제품", "건강식품", "선물세트"];
                                var target = document.getElementById("PL_sel");

                                if (e.value == "과일") var d = PL_sel_1;
                                else if (e.value == "채소") var d = PL_sel_2;
                                else if (e.value == "쌀·잡곡·견과") var d = PL_sel_3;
                                else if (e.value == "정육·계란") var d = PL_sel_4;
                                else if (e.value == "수산·건어물") var d = PL_sel_5;
                                else if (e.value == "국·반찬·요리") var d = PL_sel_6;
                                else if (e.value == "간편식·샐러드") var d = PL_sel_7;
                                else if (e.value == "양념·오일·면") var d = PL_sel_8;
                                else if (e.value == "베이커리·유제품") var d = PL_sel_9;
                                else if (e.value == "커피·음료·간식") var d = PL_sel_10;
                                else if (e.value == "생활·선물세트") var d = PL_sel_11;
                                target.options.length = 0;

                                for (x in d) {
                                    var opt = document.createElement("option");
                                    opt.value = d[x];
                                    opt.innerHTML = d[x];
                                    target.appendChild(opt);
                                }
                            }
                        </script>
                    </td>
                </tr>
                <tr>
                    <th>상품명</th>
                    <td>
                        <input type="text" name="text" placeholder="상품명을 입력하세요" id="text">
                    </td>
                </tr>
            </table>
            <!--table 끝-->
            <!--PL_c1_btnBox 시작-->
            <div class="bottom_btn" id="PL_c1_btnBox">
                <span><input type="reset" name="reset" value="초기화"></span>
                <span><input type="submit" name="submit" value="검색"></span>
            </div>
            <!--PL_c1_btnBox 끝-->
        </form>
        <!--form 끝-->
    </div>
    <!--PL_c1 끝-->
    <!--PL_c2 시작-->
    <div class="PL_c2">
        <!--PL_c2_title 시작-->
        <div id="PL_c2_title" class="green_title">
            <p>상품 목록</p>
        </div>
        <!--PL_c2_title 끝-->
        <!--form 시작-->
        <form name="prod_list">
                <span>
                    <input type="button" name="button" value="선택삭제">
                    <select class="list_select">
                        <option>판매대기</option>
                        <option>판매중</option>
                        <option>판매중지</option>
                        <option>판매종료</option>
                    </select>
                    <input type="submit" value="수정" id="PL_c2_resetBtn">
                </span>
            <!--table 시작-->
            <table width="100%" class="list_table">
                <thead class="thead">
                <tr>
                    <th width="5%"><input type="checkbox" value="prod_list" id="PL_check" name="selectall"
                                          onclick="PL_selectAll(this)"><label for="PL_check"></label></th>
                    <th width="10%">분류</th>
                    <th width="25%">상품명</th>
                    <th width="13%">판매상태</th>
                    <th width="10%">재고수량</th>
                    <th width="13%">판매가</th>
                </tr>
                </thead>
            </table>
            <!--table 끝-->
            <!-- pageBox 시작-->
            <div class="pageBox">
                <ul>
                    <li id="Maxprev"><<</li>
                    <li id="prev"><</li>
                    <li>></li>
                    <li id="Maxnext">>></li>
                </ul>
                <input type="hidden" value="0" class="page">
            </div>
            <!-- pageBox 끝-->
        </form>
        <!--form 끝-->
    </div>
    <!--PL_c2 끝-->
</div>
<!--Prod_list 끝-->
</body>
</html>