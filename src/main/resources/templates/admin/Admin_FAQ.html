<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고객센터 | FAQ 관리</title>
    <link rel="stylesheet" href="/admin/css/style.css">
    <script src="/admin/js/checkbox.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script
            src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous">
    </script>
    <script>
        $(function (){
            axios.get("/api/faq/list", {
            }).then(function (response){
                let tb = $('<tbody>')
                for (let i in response.data.data){
                    let $id = response.data.data[i].id;
                    let $title = response.data.data[i].title;
                    let $type = response.data.data[i].type;
                    let $regdate = response.data.data[i].regdate;
                    $regdate = $regdate.toString().substring(0, 10);
                    console.log($regdate)
                    let k = parseInt(i) + 1;

                    switch ($type){
                        case 1:
                            $type = "자주하는 질문"
                            break;
                        case 2:
                            $type = "회원서비스/이용"
                            break;
                        case 3:
                            $type = "쿠폰/적립금"
                            break;
                        case 4:
                            $type = "취소/반품/환불"
                            break;
                        case 5:
                            $type = "주문/결제"
                            break;
                        case 6:
                            $type = "배송"
                            break;
                        case 7:
                            $type = "더그린배송"
                            break;
                        case 8:
                            $type = "T건강습관앱"
                            break;
                    }

                let row = $('<tr>').append(
                    '<td><input type="checkbox" id="FAQ_check_' + k + '"name="faq" onclick="FAQ_checkSelectAll()" value="' + $id + '"><label for="FAQ_check_' + k + '"></label></td>' +
                    '<td><p>'+$title+'</p><p>'+$type+'</p></td>' +
                    '<td><p>'+$regdate+'</p></td>' +
                    '<td><p><input type="button" onclick="FAQ_location_2()" value="수정"></p></td></tr>'
                    )
                    tb.append(row)
                }
                $('.thead').after(tb)
            }).catch(function (err){
                console.log(err)
            })
        })

        function sendsc(){
            alert("검색버튼이 클릭되었어요!")
            $(".FAQ_c2_fqlist > tbody").remove();
            let type = $("#FAQ_c1_sel").val()
            let title =$("#FAQ_c1_scName").val()

            axios.get("/api/faq/list?type="+type+"&title="+title+"&date=?", {
            }).then(function (response){
                let tb = $('<tbody>')
                for (let i in response.data.data){
                    let $id = response.data.data[i].id;
                    let $title = response.data.data[i].title;
                    let $type = response.data.data[i].type;
                    let $regdate = response.data.data[i].regdate;
                    $regdate = $regdate.toString().substring(0, 10);
                    console.log($regdate)
                    let k = parseInt(i) + 1;

                    switch ($type){
                        case 1:
                            $type = "자주하는 질문"
                            break;
                        case 2:
                            $type = "회원서비스/이용"
                            break;
                        case 3:
                            $type = "쿠폰/적립금"
                            break;
                        case 4:
                            $type = "취소/반품/환불"
                            break;
                        case 5:
                            $type = "주문/결제"
                            break;
                        case 6:
                            $type = "배송"
                            break;
                        case 7:
                            $type = "더그린배송"
                            break;
                        case 8:
                            $type = "T건강습관앱"
                            break;
                    }

                    let row = $('<tr>').append(
                        '<td><input type="checkbox" id="FAQ_check_' + k + '"name="faq" onclick="FAQ_checkSelectAll()" value="' + $id + '"><label for="FAQ_check_' + k + '"></label></td>' +
                        '<td><p>'+$title+'</p><p>'+$type+'</p></td>' +
                        '<td><p>'+$regdate+'</p></td>' +
                        '<td><p><input type="button" onclick="FAQ_location_2()" value="수정"></p></td></tr>'
                    )
                    tb.append(row)
                }
                $('.thead').after(tb)
            }).catch(function (err){
                console.log(err)
                alert("검색결과가 없습니다")
                return false;
            })
        }
    </script>
</head>
<body>
    <!--cotent_title 시작-->
    <div class="content_title"><p>고객센터<span>FAQ 관리</span></p></div>
    <!--cotent_title 끝-->
    <!--FAQ 시작-->
    <div class="FAQ">
        <!--FAQ_c1 시작-->
        <div class="FAQ_c1">
            <p id="PQlist_c1_title" class="product_title_s"><label>FAQ 조회</label><span style="margin-left: 20px;"><input type="button" name="button" value="FAQ 등록하기" onclick="FAQ_location_1()"></span></p>
            <form class="FAQ_c1_searchBox">
                <select id="FAQ_c1_sel">
                    <option value="">선택</option>
                    <option value="1">자주하는 질문</option>
                    <option value="2">회원서비스/이용</option>
                    <option value="3">쿠폰/적립금</option>
                    <option value="4">취소/반품/환불</option>
                    <option value="5">주문/결제</option>
                    <option value="6">배송</option>
                    <option value="7">더그린배송</option>
                    <option value="8">T건강습관앱</option>
                </select>
                <input type="text" placeholder=" 검색어를 입력하세요" id="FAQ_c1_scName">
                <input type="button" value="검색" id="FAQ_c1_scBtn" onclick="sendsc()">
            </form>
        </div>
        <!--FAQ_c1 끝-->
        <!--FAQ_c2 시작-->
        <div class="FAQ_c2">
            <div id="FAQ_c2_title" class="green_title_s">
                <p>FAQ 목록 <span>(<span>현재 등록 FAQ : 2개</span>)</span></p>
            </div>
            <!--FAQ_c2_fqlist 시작-->
                <form name="FAQ_list">
                    <input type="button" value="선택삭제" class="FAQ_c2_delBtn" name="delete">
                    <table class="FAQ_c2_fqlist" border="1px" width="100%">
                    <thead class="thead">
                        <tr>
                            <th height="40px" width="5%"><input type="checkbox" value="cou_list" id="FAQ_check" name="selectall" onclick="FAQ_selectAll(this)"><label for="FAQ_check"></label></th>
                            <th>FAQ정보</th>
                            <th>등록일자</th>
                            <th>수정</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td height="80px"><input type="checkbox" value="cou_list" id="FAQ_check_2" name="faq" onclick="FAQ_checkSelectAll()"><label for="FAQ_check_2"></label></td>
                            <td><p>제목<!--예시--></p>
                            <p>내용</p></td>
                            <td><p>2021.07.27<!--예시--></p></td>
                            <td><p><input type="button" onclick="FAQ_location_2()" value="수정"></p></td>
                        </tr>
                    </tbody>
                </table>
                <!--FAQ_c2_fqlist 끝-->
                <!--pageBox 시작-->                
                <div class="pageBox">
                    <ul>
                        <li id="Maxprev"><a href="#"><<</a></li>
                        <li><a href="#"><</a></li>
                        <li><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">></a></li>
                        <li id="Maxnext"><a href="#">>></a></li>
                    </ul>
                </div>
                <!--pageBox 끝-->  
            </form>
        </div>
        <!--FAQ_c2 끝-->
    </div> 
    <!--FAQ 끝-->
</body>
</html>