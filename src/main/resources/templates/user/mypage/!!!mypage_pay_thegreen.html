<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>더그린배송</title>
    <link rel="stylesheet" type="text/css" th:href="@{/user/css/mypage.css/common.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/user/css/mypage.css/mypage.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/user/css/layout.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/user/css/index_style.css}">
    <style>
        #mypage-box { overflow: hidden; height: 100%;}
        .container { min-width: 1050px; margin: 0 auto; height: 100%; overflow-y: scroll;}
        .list li:nth-child(4) { background: #e2e2e2 url("/user/images/mypage.img/hover_right.png") no-repeat 174px 52%; background-size: 6px 11px; font-weight: 700; color: #5dab99;}
        .list li:nth-child(4) > a { color: #5dab99;}
    </style>
    <!-- axios -->
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script type="text/javascript" th:src="@{user/js/mypage.js/script.js}"></script>
    <script type="text/javascript" th:src="@{/user/js/index.js}"></script>
    <script type="text/javascript" th:src="@{/user/js/index_q.js}"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>

        $(function(){
            /* 더그린배송 결제수단 클릭시 결제수단 오버뷰 */
            $(".hellopass_link_payment").on("click", function () {
                $(".popup_payment_box").toggle();
            })
            $(".popup_close").on("click",  function () {
                $(".popup_payment_box").css("display", "none");
            })
            /* 더그린배송 결제 개인 정보 수집 및 이용 동의 오버뷰 */
            $(".enrollpay_allow").on("click",  function () {
                $(".enrollpay_allow_list2").toggle();
            })

            $(".choose_payment_box > div").click(function(event){
                $(this).add(".choose_payment_box > div").addClass("payment_box_clicked")
                $(".choose_payment_box > div").not($(this)).removeClass("payment_box_clicked")
                event.stopPropagation();
            })
        })



        function sendit() {

            let paymentType = $("input[name='method']:checked").val();
            let addrIdx = sessionStorage.getItem("the_green");
            let memIdx = $("#hidden_user").val()

            axios.post('/api/theGreen/create', {
                headers: {'Content-type': 'application/json'},
                data: {
                    paymentType: paymentType,       // 결제방식
                    mpaymNum: "0000-0000-0000-0000",                   // 총 결제금액
                    addrIdx: addrIdx,                   // 결제상태
                    memIdx: memIdx                    // 마지막 카드번호 4자리
                }
            }).then(function () {
                alert('더그린배송 5000원을 결제하였습니다.');
            }).catch(function (err){
                console.log(err)
            })
        };
    </script>
    <!-- axios -->
</head>
<body>
    <div id="mypage-box">
        <div class="container">
            <div th:replace="/user/fragment/header::header"></div>
            <div class="contents">
                <div th:replace="/user/fragment/section::section"></div>
            </div>
            <div class="main">
                <!-- main_leftaside 시작 -->
                <div class="main_leftaside1">
                    <div th:replace="/user/fragment/sidebar1::sidebar1"></div>
                <!-- main_leftaside 끝 -->
                </div>
                <!-- main_contents 시작 -->
                <div class="main_contents">                    
                    <div class="contents_box1">
                        <div class="back_button">
                            <a href="javascript:history.back();" alt="뒤로 돌아가기"></a>
                        </div>
                        <h2 class="contents_name">더그린배송 결제</h2>                        
                    </div>
                    <!-- from 시작 -->
                    <form target="_blank">
                    <!-- 결제 정보 -->
                        <div class="enroll_thegreen_box1">
                            <div class="enroll_thegreen_guide">
                                <h3>결제 정보를</h3>
                                <h3>확인해주세요</h3>
                            </div>
                            <div class="show_thegreen_image">
                                <input type="button" id="thegreen_image">
                                <label for="thegreen_image"></label>
                            </div>
                        </div>
                        <!-- 결제 정보 -->
                        <!-- 결제수단 -->
                        <div class="enroll_hellopass_box2">
                            <h5>결제수단</h5>
                            <a href="#" class="hellopass_link_payment">선택해주세요.</a>
                        </div>
                        <!-- 결제수단 -->
                        <!-- 결제 수단 팝업창 -->
                        <div class="popup_payment_box">
                            <div class="popup_topline">
                                <h2>결제 수단 선택</h2>
                                <div class="popup_close">
                                    <a href="#"></a>
                                </div>
                            </div>
                            <!-- popup_payment_form 시작 -->
                            <div class="popup_payment_form">
                                <h5>결제수단</h5>
                                <!-- choose_payment_box 시작 -->
                                <div class="choose_payment_box">
                                    <!-- 헬로페이 -->
                                    <div class="payment_box">
                                        <input type="radio" name="method" id="method1" class="popup_radio_hide" value="1">
                                        <label for="method1">
                                            <img src="/user/images/mypage.img/popup/popup_hellopay.png" alt="헬로네이처 간편결제"
                                                 class="popup_hellopay">
                                            <div class="payment_text_box_4words">
                                                <span class="payment_text">헬로페이</span>
                                            </div>
                                        </label>
                                    </div>
                                    <!-- 헬로페이 -->
                                    <!-- 차이페이 -->
                                    <div class="payment_box">
                                        <input type="radio" name="method" id="method2" class="popup_radio_hide" value="2">
                                        <label for="method2">
                                            <img src="/user/images/mypage.img/popup/popup_chaipay.png" alt="헬로네이처 간편결제"
                                                 class="popup_chaipay">
                                            <div class="payment_text_box_4words">
                                                <span class="payment_text">차이페이</span>
                                            </div>
                                        </label>
                                    </div>
                                    <!-- 차이페이 -->
                                    <!-- 네이버페이 -->
                                    <div class="payment_box">
                                        <input type="radio" name="method" id="method3" class="popup_radio_hide" value="3">
                                        <label for="method3">
                                            <img src="/user/images/mypage.img/popup/popup_naverpay.png" alt="헬로네이처 간편결제"
                                                 class="popup_naverpay">
                                            <div class="payment_text_box_5words">
                                                <span class="payment_text">네이버페이</span>
                                            </div>
                                        </label>
                                    </div>
                                    <!-- 네이버페이 -->
                                    <!-- 페이코 -->
                                    <div class="payment_box">
                                        <input type="radio" name="method" id="method4" class="popup_radio_hide" value="4">
                                        <label for="method4">
                                            <img src="/user/images/mypage.img/popup/popup_payco.png" alt="헬로네이처 간편결제"
                                                 class="popup_payco">
                                            <div class="payment_text_box_3words">
                                                <span class="payment_text">페이코</span>
                                            </div>
                                        </label>
                                    </div>
                                    <!-- 페이코 -->
                                    <!-- 삼성페이 -->
                                    <div class="payment_box">
                                        <input type="radio" name="method" id="method5" class="popup_radio_hide" value="5">
                                        <label for="method5">
                                            <img src="/user/images/mypage.img/popup/popup_samsungpay.png"
                                                 alt="헬로네이처 간편결제" class="popup_samsungpay">
                                            <div class="payment_text_box_4words">
                                                <span class="payment_text">삼성페이</span>
                                            </div>
                                        </label>
                                    </div>
                                    <!-- 삼성페이 -->
                                    <!-- SK페이 -->
                                    <div class="payment_box">
                                        <input type="radio" name="method" id="method6" class="popup_radio_hide" value="6">
                                        <label for="method6">
                                            <img src="/user/images/mypage.img/popup/popup_skpay.png" alt="헬로네이처 간편결제"
                                                 class="popup_skpay">
                                            <div class="payment_text_box_skpay">
                                                <span class="payment_text">SK페이</span>
                                            </div>
                                        </label>
                                    </div>
                                    <!-- SK페이 -->
                                    <!-- 신용카드 일반결제 -->
                                    <div class="payment_box">
                                        <input type="radio" name="method" id="method7" class="popup_radio_hide" value="7">
                                        <label for="method7">
                                            <img src="/user/images/mypage.img/popup/popup_normal.png" alt="헬로네이처 간편결제"
                                                 class="popup_normal">
                                            <div class="payment_text_box_normal">
                                                <span class="payment_text">신용카드 일반결제</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                <button type="button" id="select_payment" class="button_submit" onclick="return choosePaymentType()">선택완료</button>
                                <script>
                                    function choosePaymentType(){
                                        if($("input[name='method']").is(":checked")) {
                                            $(".hellopass_link_payment").text(($("input[name='method']:checked").siblings("label").children("div").children("span").text()));
                                            alert("선택이 완료되었습니다")
                                        }else{
                                            alert("결제방식을 선택해주세요")
                                        }
                                    }
                                </script>
                            <!-- popup_payment_form 끝 -->
                            </div>
                        </div>
                        <div class="enroll_hellopass_box3">
                            <h5>결제정보</h5>
                            <div class="hellopass_charge_price">
                                <p>총 결제 금액</p>
                                <p>5,000<span>원</span></p>
                            </div>
                            <div class="hellopass_charge_guide">
                                <p>헬로패스 결제 시 쿠폰, 헬로캐시 사용이 불가합니다.</p>
                            </div>
                        </div>
                        <!-- 개인 정보 동의 체크박스 시작 -->
                        <div class="enrollpay_allow">
                            <div class="enrollhellopay_box_check_inner">
                                <input type="checkbox" class="check_business_credit_card check_privacy" id="check_business_credit_card">
                            </div>
                            <label for="check_business_credit_card">개인 정보 수집 및 이용 동의</label>
                            <div class="allow_button">
                                <a href="#" alt="개인 정보 수집 및 이용 동의 오버뷰"></a>
                            </div>
                        </div>
                        <!-- 개인 정보 수집 체크박스 끝 -->
                        <!-- 개인 정보 수집 및 이용 동의 시작 -->
                        <div class="enrollpay_allow_list2">
                            <h5>개인 정보 수집 및 이용 동의</h5>
                            <div class="allow_contents1">
                                <p>헬로네이처는 고객님께서 구매하신 서비스 및 상품의 원활한 제공을 위해 최소한의 범위 내에서 아래와 같이 개인 정보를 수집 • 이용합니다. 고객님께서는 정보 제공에 동의하지 않으실 수 있으며 동의하지 않으실 경우, 일부 구매가 제한될 수 있습니다.</p>
                            </div>
                            <div class="allow_table">
                                <table>
                                    <tbody>
                                        <tr>
                                            <th>수집목적</th>
                                            <td>상품 배송 및 서비스 제공을 위한 사용자 정보 확인</td>
                                        </tr>
                                        <tr>
                                            <th>수집항목</th>
                                            <td>주문자 정보(주문자명, 주문자 연락처 등) 배송정보(수취인명/수취인 주소, 수취인 연락처 등), 결제정보(현금영수증 발행여부 등)</td>
                                        </tr>
                                        <tr>
                                            <th>보유기간</th>
                                            <td>5년 (계약 및 청약철회, 대금결제 및 재화 등의 공급) 또는 회원탈퇴 후 90일 까지</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- 개인 정보 수집 및 이용 동의 끝 -->
                        <!-- 카드 등록 버튼 시작 -->
                        <div class="enroll_hellopass_area">
                            <button class="hellopass_button_submit" id="pay_hellopass" onclick="return sendit()">5,000원 결제하기</button>
                        </div>
                    </form>
                    <!-- form 끝 -->
                    <!-- 카드 등록 버튼 끝 -->
                <!-- main_contents 끝 -->        
                </div>           
            <!-- main 끝 -->
            </div>
            <div th:replace="/user/fragment/footer::footer"></div>
        </div>
    </div>
</body>
</html>

